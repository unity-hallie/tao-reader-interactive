:root {
  --ink: #2c2c2c;
  --paper: #f5f0e8;
  --faint: #b5a990;
  --glow: #d4c5a9;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* kill the scrollbar — content flows, the bar does not */
html {
  scrollbar-width: none;
}
html::-webkit-scrollbar {
  display: none;
}

body {
  font-family: "Noto Serif TC", "Songti TC", serif;
  background: var(--paper);
  color: var(--ink);
  min-height: 100vh;
  display: flex;
  justify-content: center;
  padding: 2rem;
}

#app {
  max-width: 600px;
  width: 100%;
}

.chapter {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
}

.chapter-number {
  font-size: 0.875rem;
  color: var(--faint);
  margin-bottom: 1.5rem;
  letter-spacing: 0.2em;
}

.line {
  display: flex;
  justify-content: center;
  gap: 0.1rem;
  margin-bottom: 0.5rem;
}

/* buttons that don't look like buttons — but are */
.char {
  font-size: 1.75rem;
  padding: 0.25rem;
  cursor: pointer;
  user-select: none;
  background: none;
  border: none;
  font-family: inherit;
  color: inherit;
  line-height: inherit;
  transition: transform 1s cubic-bezier(0.7, 0, 0.3, 1),
              color 0.8s cubic-bezier(0.7, 0, 0.3, 1);
}

.char:hover {
  color: var(--faint);
}

.char:focus-visible {
  outline: 2px solid var(--faint);
  outline-offset: 2px;
  border-radius: 2px;
}

.char.active {
  color: var(--ink);
  transform: scale(1.6);
  transition: transform 1.2s cubic-bezier(0.6, 0, 0.1, 1),
              color 0.8s cubic-bezier(0.7, 0, 0.3, 1);
}


/* the shudder: "close me first" */
.unfold.shudder {
  animation: shudder 0.5s cubic-bezier(0.4, 0, 0.6, 1);
}

/* active character shudders too — preserves its scale */
.char.active.shudder {
  animation: char-shudder 0.5s cubic-bezier(0.4, 0, 0.6, 1);
}

@keyframes shudder {
  0%   { transform: translateX(0); }
  15%  { transform: translateX(-2px); }
  35%  { transform: translateX(1.5px); }
  55%  { transform: translateX(-0.8px); }
  75%  { transform: translateX(0.3px); }
  100% { transform: translateX(0); }
}

@keyframes char-shudder {
  0%   { transform: scale(1.6) translateX(0); }
  15%  { transform: scale(1.6) translateX(-2px); }
  35%  { transform: scale(1.6) translateX(1.5px); }
  55%  { transform: scale(1.6) translateX(-0.8px); }
  75%  { transform: scale(1.6) translateX(0.3px); }
  100% { transform: scale(1.6) translateX(0); }
}

/* neighboring characters yield outward — surface tension */
.char.yield-near {
  transform: translateX(calc(var(--yield-dir, 0) * 10px));
  transition: transform 1.1s cubic-bezier(0.6, 0.05, 0.2, 1),
              color 0.8s cubic-bezier(0.7, 0, 0.3, 1);
}

.char.yield-far {
  transform: translateX(calc(var(--yield-dir, 0) * 5px));
  transition: transform 1.8s cubic-bezier(0.6, 0.05, 0.15, 1),
              color 0.8s cubic-bezier(0.7, 0, 0.3, 1);
}

/* the unfold — an inhale */
.unfold {
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transition: max-height 1.3s cubic-bezier(0.4, 0, 0.15, 1),
              opacity 1.0s cubic-bezier(0.4, 0, 0.3, 1) 0.1s,
              margin 1.3s cubic-bezier(0.4, 0, 0.15, 1);
  margin: 0 auto;
  width: 100%;
  display: flex;
  justify-content: center;
}

.unfold.open {
  max-height: 12rem;
  opacity: 1;
  margin: 0.75rem auto 0.5rem;
}

/* the settle back — exhale, gravity */
.unfold.settling {
  max-height: 0;
  opacity: 0;
  margin: 0 auto;
  transition: max-height 0.9s cubic-bezier(0.5, 0, 0.3, 1),
              opacity 0.6s cubic-bezier(0.4, 0, 1, 1),
              margin 0.9s cubic-bezier(0.5, 0, 0.3, 1);
}

.unfold-inner {
  font-size: 0.95rem;
  color: var(--faint);
  text-align: center;
  line-height: 1.8;
  padding: 0.25rem 1rem;
  font-family: system-ui, -apple-system, sans-serif;
  letter-spacing: 0.01em;
}

.unfold-char {
  font-size: 2.5rem;
  font-family: "Noto Serif TC", "Songti TC", serif;
  color: var(--ink);
  display: block;
  margin-bottom: 0.25rem;
  transition: opacity 1.6s cubic-bezier(0.5, 0, 0.2, 1) 0.2s;
}

.unfold .unfold-char {
  opacity: 0;
}

.unfold.open .unfold-char {
  opacity: 0.2;
}
